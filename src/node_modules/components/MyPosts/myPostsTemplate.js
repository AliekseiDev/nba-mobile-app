import React from 'react';

import { Link } from 'react-router-dom';
import FontAwesome from 'react-fontawesome';
import Loading from 'components/Loading';

import moment from 'moment';
import style from './myPosts.css';

const MyPostsTemplate = ({posts, deleteArticle}) => {

  let renderItem = (item, i) => (
    <div key={i} className={style.wrapper}>
      <div className={style.itemWrapper}>
        <Link 
          to={`/${item.type}/${item._id}`}
          style={{backgroundImage: `url('${item.image}')`}}
          className={style.itemLeft}
        >
          <div></div>
        </Link>
        <div className={style.item_right}>
          <strong>Type: {item.type.slice(0, -1)}</strong>
          <strong>Created: {moment(item.date).format('MM/DD/YYYY')}</strong>
          <Link to={`/videos/${item._id}`} className={style.itemTitle}>{item.title}</Link>
        </div>
      </div>
      <div className={style.btn} onClick={() => deleteArticle(item.type, item)}>
        {
          !item.loading ?
            <FontAwesome name="trash-alt"/>
          :
            <Loading/>
        }
        
      </div>
    </div>
  )

  return (
    <div>
      { posts.map((item, i) => renderItem(item, i)) }
    </div>
  );
};

export default MyPostsTemplate;